## Проект
### Описание приложения
Это приложение позволяет сравнить два текста между собой по предложениям и определяет 
похожесть текстов друга на друга.  

Алгоритм сравнения простой: тексты сравниваются по предложениям, каждое с каждым. 
После сравнения для каждой пары предложения формируется оценка. 
Далее берется для каждого предложения из первого текста ищется максимальная оценка среди пар образованных с предложениями из второго текста и суммируется.
Результат делится на количество предложений в первом тексте.
Таким образом, получается более релевантная оценка похожести предложений и соответственно текстов.

### Запуск
Для запуска сервера fast api, нужно выполнить команду - uvicorn api:app --reload, предварительно установив библиотеки
из файла requirements.txt.  
Приложение запустится по умолчанию на 8000 порту, по адресу http://localhost:8000/docs будет доступен swagger ui.  

### Описание API
Приложение предоставляет 2 метода:  
1. Первый метод - это POST метод с путем /model/text/analysis/short и таким телом сообщения:  
```
{
  "first_text": "string",
  "second_text": "string",
  "separators": [
    ".",
    "!",
    "?"
  ],
  "is_percent": false
}
```
Он проводит сравнительный анализ двух текстов на сходство между собой и на выходе отдает число вероятности
сходства текстов. Метод принимает 2 обязательных параметра: first_text - первый текст для сравнения, second_text - 
второй текст для сравнения. Также метод принимает 2 необязательных параметра: separators - список разделителей предложений
по умолчанию равен ['?', '.', '!'], is_percent - булевый флаг, если передать true, то вывод вероятности сходства будет
в процента округленного до 2 знаков, с символом процента.  

2. Второй метод - это POST метод с путем /model/text/analysis/full и таким телом сообщения:  
```
{
  "first_text": "string",
  "second_text": "string",
  "separators": [
    ".",
    "!",
    "?"
  ],
  "is_percent": false
}
```  
Он проводит сравнительный анализ двух текстов на сходство между собой, по принципу каждое предложение с
каждым. Набор входных параметров такой же как и для первого метода. На выходе массив объектов, каждый объект состоит
из 3 полей: first_sentence - предложение из первого текста, second_sentence - предложение из второго текста,
similarity - число или строка означающая вероятность сходства предложений между собой.

### Развертывание
Для развертывания был написан Dockerfile и docker-compose.yaml файл для быстрого развертывания api и модели.  
Для локального запуска docker контейнера, необходимо из папки с docker-compose файлом выполнить команду - docker compose up.  
Также приложение было развернуто на яндекс облако с помощью docker. 
Swagger доступен по ссылке - http://158.160.136.193/docs

### Тесты
Были написаны тесты для api.
Тесты покрывают основные сценарии использования api, такие как проверка корректности ответа от входных данных,
передача неправильных входных параметров. Для локального запуска тестов необходимо сначала установить
все зависимости из requirements_test.txt, далее из папки  с тестами выполнить команду pytest.

### CI
Также был настроен github ci для автоматизированного запуска тестов при любом коммите или pr в ветку master.  
Декларативное описание ci находится в файле по следующему пути: .github/workflows/python-app.yml.